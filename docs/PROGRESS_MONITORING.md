# 📊 실시간 진행상황 모니터링 시스템

법무법인 혜안 채권추심 블로그 자동화 시스템의 실시간 진행상황을 확인할 수 있는 모니터링 시스템입니다.

## 🚀 주요 기능

### 1. 실시간 진행상황 추적
- **크롤링 진행률**: 네이버 블로그 크롤링 단계별 진행상황
- **벡터화 진행률**: 데이터 벡터화 및 저장 진행상황
- **블로그 생성 진행률**: RAG 기반 블로그 글 생성 진행상황

### 2. 다양한 시각화 방법
- **Rich 라이브러리**: 아름다운 콘솔 테이블과 진행률 바
- **Matplotlib 그래프**: 실시간 그래프 시각화 (GUI 모드)
- **콘솔 모드**: 간단한 텍스트 기반 진행률 표시

### 3. 진행상황 저장 및 복구
- JSON 파일로 진행상황 자동 저장
- 시스템 재시작 시 이전 진행상황 복구
- 작업별 상세 메타데이터 저장

## 📋 사용법

### 1. 기본 모니터링 시작
```bash
# 진행상황 모니터링만 시작
python main.py --monitor

# 크롤링과 함께 모니터링
python main.py --crawl --monitor
```

### 2. 진행상황 확인
```bash
# 현재 진행상황 한 번만 확인
python check_progress.py --once

# 실시간 진행상황 감시 (2초마다 업데이트)
python check_progress.py --watch
```

### 3. 대화형 모드에서 모니터링
```bash
# 대화형 모드 (기본적으로 모니터링 포함)
python main.py --interactive
```

## 🎯 모니터링되는 작업들

### 1. 채권추심 블로그 크롤링 (`crawl_debt_posts`)
- **단계 1**: 채권추심 카테고리 크롤링 시작 (10%)
- **단계 2**: 채권추심 카테고리 완료 (40%)
- **단계 3**: 키워드 검색 진행 (60-80%)
- **단계 4**: 중복 제거 (90%)
- **단계 5**: 크롤링 완료 (100%)

### 2. 데이터 벡터화 (`vectorize_posts`)
- **단계 1**: 포스트 처리 시작 (10%)
- **단계 2**: 포스트별 텍스트 정리 및 청크 분할 (10-70%)
- **단계 3**: 임베딩 생성 (70-90%)
- **단계 4**: ChromaDB 저장 (90-100%)

### 3. 블로그 글 생성 (`generate_blog`)
- **단계 1**: 검색 쿼리 생성 (20%)
- **단계 2**: 유사 문서 검색 (40%)
- **단계 3**: RAG 컨텍스트 구성 (60%)
- **단계 4**: AI 글 생성 (80%)
- **단계 5**: 결과 포맷팅 (100%)

## 📊 진행상황 표시 예시

### Rich 라이브러리 모드
```
🏛️ 법무법인 혜안 채권추심 블로그 자동화 시스템 - 진행상황
┌─────────────────┬─────────┬─────────┬─────────────────┬──────────┐
│ 작업            │ 상태    │ 진행률  │ 현재 단계       │ 소요시간 │
├─────────────────┼─────────┼─────────┼─────────────────┼──────────┤
│ 채권추심 블로그  │ 🔄 running │ 65.0% │ 키워드 '미수금  │ 00:02:15 │
│ 크롤링          │         │         │ 회수' 검색 중   │          │
├─────────────────┼─────────┼─────────┼─────────────────┼──────────┤
│ 데이터 벡터화   │ ⏳ pending │ 0.0%  │ 대기 중         │ 00:00:00 │
└─────────────────┴─────────┴─────────┴─────────────────┴──────────┘
```

### 콘솔 모드
```
🏛️ 법무법인 혜안 채권추심 블로그 자동화 시스템 - 진행상황
================================================================================

🔄 채권추심 블로그 크롤링
   진행률: 65.0% [████████████████████░░░░░░░░░░]
   현재 단계: 키워드 '미수금 회수' 검색 중
   소요시간: 00:02:15

⏳ 데이터 벡터화
   진행률: 0.0% [░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░]
   현재 단계: 대기 중
   소요시간: 00:00:00

📈 요약:
   총 작업: 2개
   완료: 0개
   진행 중: 1개
   실패: 0개
   평균 진행률: 32.5%
   완료율: 0.0%
```

## 🔧 설정 옵션

### 환경변수 설정
```bash
# GPU 사용 설정 (선택사항)
export USE_GPU=true

# 로그 레벨 설정
export LOG_LEVEL=INFO
```

### 모니터링 모드 선택
```python
# progress_monitor.py에서 설정
monitor = ProgressMonitor(
    use_gui=True,      # GUI 모드 사용 (matplotlib 필요)
    use_rich=True      # Rich 라이브러리 사용
)
```

## 📁 파일 구조

```
LSC/
├── progress_monitor.py      # 메인 모니터링 시스템
├── check_progress.py        # 진행상황 확인 도구
├── progress_data.json       # 진행상황 저장 파일
├── main.py                  # 통합된 메인 시스템
├── crawler.py               # 크롤링 모니터링 통합
├── vectorizer.py            # 벡터화 모니터링 통합
└── PROGRESS_MONITORING.md   # 이 문서
```

## 🚨 문제 해결

### 1. matplotlib 오류
```bash
pip install matplotlib
```

### 2. rich 라이브러리 오류
```bash
pip install rich
```

### 3. 진행상황 파일 오류
```bash
# 진행상황 파일 삭제 후 재시작
rm progress_data.json
```

### 4. 모니터링이 작동하지 않는 경우
- `progress_monitor.py`가 올바르게 임포트되는지 확인
- 로그 파일(`blog_automation.log`)에서 오류 메시지 확인
- 필요한 라이브러리가 설치되어 있는지 확인

## 📈 성능 최적화

### 1. 모니터링 오버헤드 최소화
- 진행상황 업데이트는 1초마다로 제한
- 불필요한 GUI 모드는 비활성화

### 2. 메모리 사용량 최적화
- 완료된 작업은 자동으로 정리
- 진행상황 파일 크기 제한

### 3. 네트워크 최적화
- 크롤링 딜레이 조정
- 배치 크기 최적화

## 🎉 사용 예시

### 전체 워크플로우 모니터링
```bash
# 1. 모니터링 시작
python main.py --monitor &

# 2. 크롤링 실행 (다른 터미널에서)
python main.py --crawl

# 3. 진행상황 확인
python check_progress.py --watch
```

### 개발 중 디버깅
```bash
# 상세 로그와 함께 모니터링
python main.py --crawl --monitor 2>&1 | tee crawl.log
```

이제 실시간으로 진행상황을 확인할 수 있습니다! 🎊
